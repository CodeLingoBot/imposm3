# test mappings 
#
# only `type: linestring` impemented!
#
# Regexp Note: be careful because yaml interprets escape sequences inside double quoted strings!
#       so use  single quoted string !


tables:
  testfilters_test_t0:
    fields:
    - name: id
      type: id
    - key: admin_level
      name: admin_level
      type: integer
    filters:
      require:
        boundary: ["administrative","maritime"]
    mapping:
      admin_level: ['2','4']
    type: linestring

  testfilters_test_t1:
    fields:
    - name: id
      type: id
    - key: admin_level
      name: admin_level
      type: integer
    filters:
      require:
        admin_level: ["2","4"]
    mapping:
      boundary:
      - administrative
      - maritime
    type: linestring


  testfilters_test_t2_building:
    fields:
    - name: id
      type: id
    - key: building
      name: building
      type: string
    filters:
      reject:
        building: ["no","none"]
      require_regexp:
        'addr:housenumber': '^\d+[a-zA-Z,]*$'
        building: '^[a-z_]+$'
    mapping:
      building:
      - __any__
    type: linestring


  testfilters_test_t3_highway_with_name:
    fields:
    - name: id
      type: id
    - key: highway
      name: highway
      type: string
    - key: name
      name: name
      type: string
    filters:
      require:
        name: ["__any__"]
      reject:
        highway: ["no","none"]
    mapping:
      highway:
      - __any__
    type: linestring


  testfilters_test_t4_waterway_with_name:
    fields:
    - name: id
      type: id
    - key: waterway
      name: waterway
      type: string
    - key: name
      name: name
      type: string
    filters:
      require:
        name: ["__any__"]
        waterway:
        - stream
        - river
        - canal
        - drain
        - ditch
      reject:
        fixme: ['__any__']
        amenity: ['__any__']
        shop: ['__any__']
        building: ['__any__']
        tunnel: ['yes']
      reject_regexp:
        level: '^\D+.*$'
    mapping:
      waterway:
      - __any__
    type: linestring


  testfilters_test_t5_depricated_exclude_tags:
    _comment:  Allways Empty !  
    fields:
    - name: id
      type: id
    - key: waterway
      name: waterway
      type: string
    - key: name
      name: name
      type: string
    filters:
      require:
        waterway:
        - stream
        - river
        - canal
        - drain
        - ditch
      # the `exclude_tags` will be converted to `reject` filter`  
      # and  `require` and the  `reject` filter will be same!
      exclude_tags:   
      - ['waterway', 'stream']
      - ['waterway', 'river'] 
      - ['waterway', 'canal']   
      - ['waterway', 'drain']   
      - ['waterway', 'ditch']                          
    mapping:
      waterway:
      - __any__
    type: linestring
